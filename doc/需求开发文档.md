# Offer贝 - 需求文档

## 1. 项目概述
Offer贝（OfferBei）是一个基于AI技术的智能面试辅助系统，旨在帮助求职者全方位准备面试，提高面试成功率。系统采用 DeepSeek 大模型提供简历优化、自我介绍生成、智能题库、真人模拟面试和面试策略等功能，支持中英双语，为求职者提供个性化、专业化的面试准备方案。

### 1.1 项目目标
- 帮助用户优化简历，提高简历通过率和竞争力
- 生成个性化、多版本的自我介绍，提升面试第一印象
- 提供针对性的个性化题库，帮助用户系统准备面试问题
- 模拟真实面试场景，通过 AI 对话提升用户面试经验
- 提供面试策略分析和高质量反问问题，帮助用户掌握面试主动权
- 支持中英双语，满足不同语言背景用户的需求
- 提供安全可靠的用户认证系统，实现数据跨设备同步

### 1.2 技术栈
#### 前端
- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite 7.2+
- **路由管理**: Vue Router 4.6+
- **国际化**: Vue I18n 11.2+
- **HTTP 客户端**: Axios 1.13+
- **PDF 生成**: jsPDF 3.0+ + html2canvas 1.4+
- **Markdown 渲染**: Marked 17.0+
- **代码高亮**: Highlight.js 11.11+

#### 后端
- **框架**: Flask 2.3+
- **ORM**: SQLAlchemy
- **数据库驱动**: PyMySQL
- **认证**: Flask-JWT-Extended (JWT Token)
- **跨域**: Flask-CORS
- **AI 服务**: DeepSeek API (OpenAI SDK 兼容)
- **语音识别**: Aliyun ASR (WebSocket)
- **文件处理**: pdfplumber (PDF 提取)
- **邮件服务**: Flask-Mail (密码重置)
- **配置管理**: python-dotenv

#### 数据库
- **MySQL 5.7+**

#### 第三方服务
- **DeepSeek AI** - 大语言模型
- **阿里云 ASR** - 实时语音识别
- **SMTP** - 邮件发送

## 2. 功能需求

### 2.1 用户认证系统
- 用户注册（邮箱 + 验证码）
- 用户登录（邮箱 + 密码）
- 密码强度检测
- 找回密码/重置密码（邮件验证）
- JWT Token 认证
- 跨设备数据同步
- 记住登录状态
- 防暴力破解机制

### 2.2 首页
- 系统介绍和核心亮点
- 功能模块卡片导航
- 用户引导和快速开始
- 响应式设计

### 2.3 简历优化
- 简历上传（支持 PDF 格式）
- 简历内容解析（使用 pdfplumber 提取文本）
- AI 智能分析简历：
  - **综合评分**：完整性、匹配度、竞争力三个维度评分
  - **智能诊断**：分类为警告、错误和建议
  - **关键词分析**：提取至少 10 个技术岗位相关关键词
  - **STAR 法则重写**：优化项目经验描述
- 生成优化后的简历（Markdown 格式）
- 简历版本管理（原始简历和优化简历分别存储）
- 优化简历 PDF 下载

### 2.4 自我介绍
- 基于简历智能生成自我介绍
- **版本选择**：
  - 30 秒电梯演讲版（快速亮点）
  - 1 分钟标准版（平衡覆盖）
  - 3 分钟深度版（详细展开，含项目细节）
- **风格选择**：
  - 正式 - 商务专业场合
  - 轻松活泼 - 创业型公司
  - 学术专业 - 技术导向岗位
- 语音朗读功能（支持速度调节）
- 提词器模式（字体大小、滚动速度、深色背景可调）
- PDF 导出功能
- 历史记录管理（不同版本/风格独立保存）

### 2.5 智能题库
- 基于简历生成个性化题库
- **题目数量选择**：10 题 / 30 题 / 50 题
- **题型科学分布**：
  - 高频必问题 (30%)
  - 简历深挖题 (25%)
  - 专业技能题 (25%)
  - 行为/情景题 (20%)
- 支持自定义话题（如"微服务"、"React 性能优化"）
- 每题包含：
  - 问题内容
  - 参考答案
  - 面试官意图分析
  - 题型分类
- 批量并发生成（30 题约 30 秒）
- 题库 PDF 导出功能

### 2.6 模拟面试
- 基于简历生成面试问题
- **面试官风格选择**：
  - 温和 HR - 友好亲切
  - 严格技术总监 - 专业严谨
  - 平衡面试官 - 中性风格
- **面试时长选择**：15 / 30 / 45 / 60 分钟
- **回答方式**：
  - 文字模式 - 输入回答
  - 语音模式 - 阿里云 ASR 实时转写（WebSocket）
- AI 智能追问（根据回答内容动态生成后续问题）
- 详细面试报告：
  - 多维度评分（专业能力、逻辑表达、自信度、岗位匹配）
  - 逐题分析（问题、回答、反馈、建议）
  - 优化建议汇总

### 2.7 面试策略
#### 画像分析
- 背景信息输入（职位、经验、目标岗位）
- 优化方向选择：
  - 空窗期分析与应对
  - 转行背景优势挖掘
  - 经验不足补偿策略
  - 防御性话术准备
- 结构化分析结果（多维度策略 + Tips）
- 历史记录自动保存

#### 反问环节
- 目标公司/岗位输入
- 问题类型筛选：
  - 公司发展类
  - 团队文化类
  - 岗位职责类
  - 发展机会类
- 生成 5-8 个高质量反问问题
- 提问意图解析
- 策略锦囊 PDF 导出（整合画像分析和反问问题）

### 2.8 国际化支持
- 中英双语界面切换
- 智能语言检测：
  - 优先级 1：用户手动选择
  - 优先级 2：浏览器语言
  - 优先级 3：默认中文
- AI 生成内容自动匹配界面语言
- 语言选择持久化（localStorage）
- `X-Locale` header 同步前后端语言

### 2.9 用户指南
- 使用手册页面（详细功能说明）
- FAQ 常见问题解答

## 3. 非功能需求

### 3.1 性能需求
- **页面加载时间**: < 2秒（首屏）
- **API响应时间**: 
  - 简单查询 < 1秒
  - AI 生成 < 30秒（并发优化后）
- **并发用户数**: 支持 1000+ 并发用户
- **题库生成优化**: 采用批量并发调用，30 题约 30秒
- **语音识别**: WebSocket 实时转写，延迟 < 500ms

### 3.2 安全性需求
- **JWT 认证**: 无状态 Token 验证，24小时过期
- **密码加密**: Werkzeug + bcrypt 加密存储
- **防暴力破解**: 5次失败尝试后锁定账号5分钟
-**数据隔离**: 不同用户数据完全隔离
- **跨设备同步**: 基于 JWT Token，保证数据一致性
- **防注入攻击**: 参数验证和 SQL 预编译
- **敏感数据脱敏**: 邮箱部分隐藏
- **HTTPS 传输**: 生产环境强制 HTTPS

### 3.3 可用性需求
- **系统可用性**: 99.9% uptime
- **界面友好**: 直观的卡片式布局和操作流程
- **响应式设计**: 完美适配桌面和移动设备
- **错误提示**: 详细的错误信息和操作指引
- **加载状态**: 明确的加载动画和进度提示
- **国际化**: 完整的中英双语支持

### 3.4 可扩展性需求
- **插件化开发**: 模块化的前后端架构
- **第三方集成**: 支持更多 AI 模型接入
- **数据导出**: 支持 PDF、JSON 等格式
- **API 版本化**: 预留 API 升级空间
- **微服务改造**: 可拆分为独立微服务

## 4. 用户角色

### 4.1 普通用户（求职者）
- 注册登录系统
- 上传并优化简历
- 生成自我介绍和题库
- 进行模拟面试
- 制定面试策略
- 切换界面语言

### 4.2 管理员（预留）
- 用户管理和审核
- 系统配置和监控
- 数据统计和分析
- 日志管理和告警
- AI 模型调优

## 5. 使用场景

### 5.1 完整面试准备流程
1. 用户注册并登录系统
2. 上传简历，系统进行优化并提供建议
3. 基于优化后的简历生成多版本自我介绍
4. 生成个性化题库（30-50题），逐题练习
5. 进行多轮模拟面试，获取详细反馈
6. 生成面试策略（画像分析+反问问题）
7. 导出所有材料，准备真实面试

### 5.2 快速简历优化
1. 用户上传简历
2. 等待 AI 分析（10-20秒）
3. 查看评分和诊断建议
4. 查看 STAR 重写和关键词建议
5. 下载优化后的简历 PDF

### 5.3 自我介绍准备
1. 确保已上传简历
2. 选择自我介绍版本（30秒/1分钟/3分钟）
3. 选择语言风格（正式/轻松/学术）
4. 生成自我介绍
5. 使用提词器模式练习
6. 语音朗读检查流畅度
7. 导出 PDF 备用

### 5.4 跨国求职场景
1. 用户切换界面语言为英语
2. 上传英文简历
3. 系统生成英文自我介绍和题库
4. 英文模拟面试练习
5. 获取英文面试策略
6. 所有内容均为英语，匹配外企面试需求

# AI智能面试宝典 - 软件设计开发文档

## 1. 系统架构

### 1.1 整体架构
```
┌─────────────────────────────────────────────────────────────────┐
│                      前端应用 (Vue 3 + Vite)                     │
├─────────────────────────────────────────────────────────────────┤
│  首页  │ 简历优化 │ 自我介绍 │ 智能题库 │ 模拟面试 │ 面试策略  │
└─────────────────────────────────────────────────────────────────┘
                              │ HTTP/HTTPS
┌─────────────────────────────────────────────────────────────────┐
│                      后端服务 (Flask)                           │
├─────────────────────────────────────────────────────────────────┤
│  API路由  │ 业务逻辑 │ AI服务集成 │ 数据库操作 │ 文件服务     │
└─────────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────────┐
│                      数据库 (MySQL)                              │
├─────────────────────────────────────────────────────────────────┤
│  用户表  │ 简历表 │ 自我介绍表 │ 题库表 │ 模拟面试表 │ 策略表   │
└─────────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────────┐
│                      AI服务 (DeepSeek API)                      │
└─────────────────────────────────────────────────────────────────┘
```

### 1.2 技术架构
- **前端**：Vue 3 + Vite + Vue Router + Axios
- **后端**：Flask + SQLAlchemy + Flask-CORS
- **数据库**：MySQL
- **AI服务**：DeepSeek API
- **文件存储**：本地文件系统

## 2. 前端设计

### 2.1 项目结构
```
src/
├── assets/          # 静态资源
├── components/      # 公共组件
├── views/           # 页面组件
│   ├── HomeView.vue
│   ├── ResumeView.vue
│   ├── SelfIntroView.vue
│   ├── QuestionBankView.vue
│   ├── MockInterviewView.vue
│   └── StrategyView.vue
├── router/          # 路由配置
│   └── index.js
├── utils/           # 工具函数
├── App.vue          # 根组件
└── main.js          # 入口文件
```

### 2.2 主要页面组件

#### 2.2.1 首页 (HomeView.vue)
- 系统介绍
- 功能模块导航
- 用户引导

#### 2.2.2 简历优化 (ResumeView.vue)
- 简历上传功能
- 简历内容展示
- AI分析结果展示
- 优化建议展示
- 优化后的简历展示

#### 2.2.3 自我介绍 (SelfIntroView.vue)
- 版本和风格选择
- 自我介绍生成功能
- 语音朗读功能
- 提词器功能
- PDF导出功能

#### 2.2.4 智能题库 (QuestionBankView.vue)
- 题目数量选择
- 题型分布展示
- 自定义话题输入
- 题库生成功能
- 题目列表展示
- 参考答案查看
- 题库导出功能

#### 2.2.5 模拟面试 (MockInterviewView.vue)
- 面试配置（风格、模式、时长）
- 面试过程展示
- 问题展示和回答输入
- 面试报告生成

#### 2.2.6 面试策略 (StrategyView.vue)
- 背景信息输入
- 优化方向选择
- 画像分析生成
- 反问问题生成
- 历史记录管理

### 2.3 前端状态管理
- 使用Vue 3的Composition API进行状态管理
- 使用localStorage存储用户ID和简历ID
- 页面间通过路由参数传递数据

## 3. 后端设计

### 3.1 项目结构
```
backend/
├── app/
│   ├── __init__.py       # 应用初始化
│   ├── routes/           # API路由
│   │   ├── resume.py
│   │   ├── self_intro.py
│   │   ├── question_bank.py
│   │   ├── mock_interview.py
│   │   └── strategy.py
│   ├── services/         # 业务服务
│   │   ├── file_service.py
│   │   └── deepseek_service.py
│   ├── models.py         # 数据库模型
│   ├── utils/            # 工具函数
│   └── config.py         # 配置文件
├── resumes/              # 简历文件存储
│   ├── original/         # 原始简历
│   └── optimized/        # 优化后的简历
├── init_db.py            # 数据库初始化
└── run.py                # 应用入口
```

### 3.2 主要业务服务

#### 3.2.1 文件服务 (file_service.py)
- 简历文件读取（支持PDF）
  - PDF：使用PyMuPDF优化文本提取
- 简历内容解析和清理
- 简历文件保存（原始和优化后简历）
- 简历内容获取

#### 3.2.2 AI服务 (deepseek_service.py)
- DeepSeek API调用（使用OpenAI Python SDK）
- 简历分析（评分、诊断、关键词提取、STAR重写、优化简历生成）
- 自我介绍生成（支持不同版本和风格）
- 题库生成
- 面试问题生成
- 面试策略生成

### 3.3 API路由设计

#### 3.3.1 简历相关API
- `POST /api/resume/analyze` - 分析简历
- `POST /api/resume/get` - 获取简历数据

#### 3.3.2 自我介绍相关API
- `POST /api/self-intro/generate` - 生成自我介绍
- `POST /api/self-intro/get` - 获取自我介绍

#### 3.3.3 智能题库相关API
- `POST /api/question-bank/generate` - 生成题库
- `POST /api/question-bank/get` - 获取题库

#### 3.3.4 模拟面试相关API
- `POST /api/mock-interview/start` - 开始模拟面试
- `POST /api/mock-interview/answer` - 提交面试答案
- `POST /api/mock-interview/end` - 结束模拟面试

#### 3.3.5 面试策略相关API
- `POST /api/strategy/analysis` - 生成画像分析
- `POST /api/strategy/questions` - 生成反问问题
- `GET /api/strategy/analysis/history` - 获取分析历史
- `GET /api/strategy/questions/history` - 获取问题历史

## 4. 数据库设计

### 4.1 用户表 (users)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 用户唯一标识（UUID） |
| user_id | VARCHAR(36) | UNIQUE | JWT Token 中的用户 ID（UUID） |
| email | VARCHAR(120) | UNIQUE, NOT NULL | 邮箱（登录凭据） |
| password | VARCHAR(255) | NOT NULL | 加密后的密码（Werkzeug + bcrypt） |
| email_verified | BOOLEAN | DEFAULT FALSE | 邮箱验证状态 |
| verification_code | VARCHAR(6) | NULL | 邮箱验证码 |
| verification_code_expiry | DATETIME | NULL | 验证码过期时间（15分钟） |
| reset_password_token | VARCHAR(100) | NULL | 密码重置令牌 |
| reset_password_expiry | DATETIME | NULL | 重置令牌过期时间（24小时） |
| login_attempts | INT | DEFAULT 0 | 登录尝试次数 |
| locked_until | DATETIME | NULL | 账号锁定时间（5次失败后锁定5分钟） |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

**关系**：
- 一对多：`resumes`（简历）
- 一对多：`self_intros`（自我介绍）
- 一对多：`question_banks`（题库）
- 一对多：`mock_interviews`（模拟面试）
- 一对多：`interview_strategies`（面试策略）

### 4.2 简历表 (resumes)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 简历记录ID |
| resume_id | VARCHAR(8) | UNIQUE | 简历ID |
| user_id | VARCHAR(36) | FOREIGN KEY | 用户ID |
| original_content | TEXT | | 原始简历内容 |
| optimized_content | TEXT | | 优化后的简历内容 |
| score | INT | | 简历评分 |
| diagnosis | JSON | | 智能诊断 |
| keywords | JSON | | 关键词 |
| star_rewrite | JSON | | STAR法则重写 |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

### 4.3 自我介绍表 (self_intros)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 自我介绍ID |
| user_id | VARCHAR(36) | FOREIGN KEY | 用户ID |
| resume_id | VARCHAR(8) | | 关联的简历ID |
| self_intro_type | VARCHAR(50) | | 自我介绍类型 |
| content | TEXT | | 自我介绍内容 |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

### 4.4 智能题库表 (question_banks)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 题库ID |
| user_id | VARCHAR(36) | FOREIGN KEY | 用户ID |
| resume_id | VARCHAR(8) | | 关联的简历ID |
| count | INT | | 题库数量 |
| questions | JSON | | 生成的问题列表 |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

### 4.5 模拟面试表 (mock_interviews)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 面试ID |
| user_id | VARCHAR(36) | FOREIGN KEY | 用户ID |
| resume_id | VARCHAR(8) | | 关联的简历ID |
| style | VARCHAR(50) | | 面试风格 |
| mode | VARCHAR(50) | | 面试模式 |
| duration | INT | | 面试时长 |
| conversation_history | JSON | | 对话历史 |
| question_answers | JSON | | 问答记录 |
| report | JSON | | 面试报告 |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

### 4.6 面试策略表 (interview_strategies)
| 字段名 | 数据类型 | 约束 | 描述 |
|-------|---------|------|------|
| id | VARCHAR(36) | PRIMARY KEY | 策略ID |
| user_id | VARCHAR(36) | FOREIGN KEY | 用户ID |
| resume_id | VARCHAR(8) | | 关联的简历ID |
| type | VARCHAR(20) | | 策略类型（analysis或questions） |
| background_info | TEXT | | 背景信息 |
| directions | JSON | | 优化方向 |
| company_name | VARCHAR(100) | | 目标公司 |
| position | VARCHAR(100) | | 目标岗位 |
| question_types | JSON | | 问题类型 |
| result | JSON | | 生成结果 |
| created_at | DATETIME | DEFAULT CURRENT_TIMESTAMP | 创建时间 |
| updated_at | DATETIME | DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP | 更新时间 |

## 5. 部署方案

### 5.1 开发环境部署
1. 安装依赖
   ```
   # 前端
   npm install
   
   # 后端
   pip install -r requirements.txt
   ```

2. 启动服务
   ```
   # 前端
   npm run dev
   
   # 后端
   python run.py
   ```

3. 初始化数据库
   ```
   python init_db.py
   ```

### 5.2 生产环境部署
1. 前端构建
   ```
   npm run build
   ```

2. 配置Nginx反向代理
3. 使用Gunicorn部署Flask应用
4. 配置MySQL数据库
5. 设置环境变量
6. 配置日志管理

### 5.3 持续集成/持续部署
- 使用GitHub Actions进行CI/CD
- 自动构建和测试
- 自动部署到生产环境

## 6. 安全设计

### 6.1 数据安全
- 用户数据加密存储
- 敏感数据脱敏处理
- 定期数据备份

### 6.2 API安全
- 使用JWT进行身份验证
- API请求频率限制
- 输入参数验证和过滤
- 防止SQL注入和XSS攻击

### 6.3 系统安全
- 定期漏洞扫描
- 及时更新依赖库
- 配置防火墙规则
- 安全日志记录和监控

## 7. 性能优化

### 7.1 前端优化
- 代码分割和懒加载
- 图片优化和CDN加速
- 减少HTTP请求
- 使用缓存策略

### 7.2 后端优化
- 数据库查询优化
- 使用缓存（Redis）
- 异步处理
- 负载均衡

### 7.3 AI服务优化
- API请求缓存
- 批量处理
- 合理设置超时时间
- 错误重试机制

## 8. 监控和维护

### 8.1 系统监控
- 应用性能监控
- 数据库监控
- API调用监控
- 错误日志监控

### 8.2 日常维护
- 定期备份数据
- 清理日志文件
- 更新系统和依赖
- 性能优化和调优

## 9. 测试策略

### 9.1 单元测试
- 前端组件测试
- 后端服务测试
- API测试

### 9.2 集成测试
- 前后端集成测试
- 数据库集成测试
- AI服务集成测试

### 9.3 端到端测试
- 完整业务流程测试
- 不同场景测试
- 兼容性测试

### 9.4 性能测试
- 负载测试
- 压力测试
- 并发测试

# 总结

AI智能面试宝典是一个功能完整、架构清晰的面试辅助系统，通过AI技术帮助用户准备面试，提高面试成功率。系统采用前后端分离架构，前端使用Vue 3 + Vite，后端使用Flask，数据库使用MySQL，AI服务使用DeepSeek API。

本需求文档和软件设计开发文档详细描述了系统的功能需求、非功能需求、系统架构、前端设计、后端设计、数据库设计、API设计、部署方案、安全设计、性能优化、监控和维护以及测试策略，为系统的开发、测试和部署提供了完整的指导。